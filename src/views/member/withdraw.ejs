<%- include('../includes/head.ejs')%>
<link rel="stylesheet" href="/css/member.css">
</head>
<body>
	<%- include('../includes/navbar.ejs')%>
	<main>
		<div class="container form-floating">
			<div class="login-page">
				<div class="login-form">
					<h2>회원 탈퇴</h2>

					<%if (alertMsg) {%>
						<div class="alert alert-<%-alertMsg.type%> alert-dismissible fade show" role="alert">
							<strong><%-alertMsg.intro%></strong> <%-alertMsg.message%>
							<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
						</div>
					<%}%>

					<form name="frm" method="POST" action="/member/withdraw" onSubmit="return goWithdraw()" class="row g-3 needs-validation" novalidate>
						<input type="HIDDEN" id="memberSeq" name="memberSeq" value="<%=result.M_SEQ%>" READONLY>

						<div class="col-md-6 form-floating mb-3">
							<input type="text" class="form-control" id="memberId" name="memberId" value="<%=result.M_NAME%>" READONLY>
							<label for="memberId" class="form-label">아이디</label>
						</div>
						
						<div class="col-md-12 form-floating mb-3">
							<textarea type="text" class="form-control col-md-3" id="withdrawReason" name="withdrawReason"></textarea>
							<label for="withdrawReason" class="form-label">탈퇴 사유</label>
						</div>

						<div class="col-12">
							<button class="btn btn-primary" type="submit">탈퇴</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</main>

<script>
	function goWithdraw() {
		if(confirm("탈퇴하시겠습니까?")){
			$("#frm").submit();
		}else{
			return false;
		}
	}
</script>
<%- include('../includes/footer.ejs')%>